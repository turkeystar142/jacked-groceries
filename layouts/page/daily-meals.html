{{ define "main" }}
<section class="page-header">
  <h2>{{ .Title }}</h2>
  {{ with .Params.subtitle }}<p class="page-subtitle">{{ . }}</p>{{ end }}
</section>

<div class="tracker-controls">
  <button id="reset-day" class="btn-reset">Reset Day</button>
</div>

<div class="daily-meals-intro">
  <p>Enter consumed amounts to track your daily progress. The same targets apply every day.</p>
</div>

<table class="daily-meals-table">
  <thead>
    <tr>
      <th>Food</th>
      <th>Preparation</th>
      <th>Weight</th>
      <th>Protein</th>
      <th>Calories</th>
      <th>Consumed</th>
      <th>Remaining</th>
    </tr>
  </thead>
  <tbody>
    {{ range $.Site.Data.daily_intake.items }}
    <tr data-target="{{ .targetValue }}" data-unit="{{ .unit }}" data-protein="{{ .dailyProtein }}" data-cal="{{ .dailyCal }}">
      <td>{{ .food }}</td>
      <td>{{ if .preparation }}<span class="prep-note">{{ .preparation }}</span>{{ else }}&mdash;{{ end }}</td>
      <td>{{ .dailyAmount }}</td>
      <td>{{ .dailyProtein }} g</td>
      <td>{{ .dailyCal }} kcal</td>
      <td>
        <input type="number" class="consumed-input" min="0" step="1" value="" placeholder="0">
        <span class="unit-label">{{ .unit }}</span>
      </td>
      <td class="remaining-cell remaining-positive">{{ .dailyAmount }}</td>
    </tr>
    {{ end }}
    {{ range seq 6 }}
    <tr class="custom-row" data-custom-index="{{ sub . 1 }}" data-target="0" data-unit="g" data-protein="0" data-cal="0">
      <td><input type="text" class="custom-input custom-food" placeholder="Custom item"></td>
      <td><input type="text" class="custom-input custom-prep" placeholder="â€”"></td>
      <td><input type="number" class="custom-input custom-target" min="0" step="1" placeholder="0"> <input type="text" class="custom-input custom-unit" value="g" style="width:2.5rem"></td>
      <td><input type="number" class="custom-input custom-protein" min="0" step="1" placeholder="0"> g</td>
      <td><input type="number" class="custom-input custom-cal" min="0" step="1" placeholder="0"> kcal</td>
      <td>
        <input type="number" class="consumed-input" min="0" step="1" value="" placeholder="0">
        <span class="unit-label">g</span>
      </td>
      <td class="remaining-cell remaining-zero">&mdash;</td>
    </tr>
    {{ end }}
  </tbody>
  <tfoot>
    <tr class="totals-row">
      <td></td>
      <td></td>
      <td></td>
      <td id="total-protein"><strong>0 / 185 g</strong></td>
      <td id="total-cal"><strong>0 / 1601 kcal</strong></td>
      <td></td>
      <td></td>
    </tr>
  </tfoot>
</table>
{{ end }}

{{ define "scripts" }}
<script src="{{ "js/daily-tracker.js" | relURL }}"></script>
{{ end }}
